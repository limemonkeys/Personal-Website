<!DOCTYPE html>
<html>
    <head>
        <meta charset="uft-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>My Website</title>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fredoka One">
        <link rel="stylesheet" href="styles/styles.css">
        <script src="jquery-3.6.4.min.js"></script>
        <script src="functions.js"></script>
    </head>
    <body id="body">
        <img id="character" style="position:absolute;" src="./Images/Character/M0.png" onclick="GFG_Fun()" >
        <div id="deathSpawner" style="position:absolute;">
            
        </div>
        <div id="deathSpace" style="position:absolute;">
            
        </div>
        <img id="character-space" style="visibility: hidden;" src="./Images/Character/M0.png" onclick="GFG_Fun()">
        <script type="text/javascript">
            document.getElementById('character').style.transform = "scale(1)";

            var left = 0;
            guy = document.getElementById('character');
            timerId = 0;
            counter = 0;
            deathCounter = 0;
            spriteManager = 0;
            up = true;
            right = true;
            moveSpeed = 8;
            opacityFadeNum = 0;
            wait = true;
            death = false;
            opacityFade = false;
            score = 0;
            falling = false;
            fallingCounter = 0;
            permaWait = false;
            firstCycle = true;
            
            //Temp vars
            trigger = false;
            
            //TODO if permawait, corpse should not teleport to curr pos (to see bug kill while waiting about to walk)

            timerId = setInterval( function() { //This function is called by the browser every 33 milliseconds
                var width = document.getElementById('nav-name').offsetWidth - 64;

                if (death){
                    deathCounter++;
                    if (deathCounter > 32){
                        document.getElementById('character').style.opacity = "0.0";
                        document.getElementById('character').style.visibility = "visible";
                        deathCounter = 0;
                        death = false;
                        opacityFade = true;
                    }
                }

                if (falling){
                    fallingCounter++;

                    //if (fallingCounter < 32){

                        
                    // This can probably be improved on
                    //if (fallingCounter < 32){
                        if (isNaN(parseInt(document.getElementById('corpse' + score).style.top))){
                            if (!permaWait && !wait){
                                document.getElementById('corpse' + score).style.left =  guy.style.left = left + "px";
                            }
                            else{
                                permaWait = true;
                            }
                            document.getElementById('corpse' + score).style.top = (fallingCounter * fallingCounter)+ "px";
                            firstCycle = false;
                        }
                        else{
                            
                            if (parseInt(document.getElementById('corpse' + score).style.top) < document.getElementById('body').scrollHeight - document.getElementsByClassName('footer')[0].offsetHeight){

                                if (!permaWait && !wait){
                                    document.getElementById('corpse' + score).style.left =  guy.style.left = left + "px";
                                }
                                else{
                                    permaWait = true;
                                }
                                //document.getElementById('nav-name').innerHTML = fallingCounter * fallingCounter + "\n" + document.getElementById('body').scrollHeight
                                if (fallingCounter * fallingCounter > document.getElementById('body').scrollHeight - document.getElementsByClassName('footer')[0].offsetHeight){
                                    //document.getElementById('nav-name').innerHTML = document.getElementById('corpse' + score).clientHeight / 2;
                                    fallingCounter = 0;
                                    falling = false;
                                    permaWait = false;
                                    firstCycle = true;
                                    
                                    //document.getElementById('corpse' + score).src = './Images/Character/D1.png';
                                    document.getElementById('corpse' + score).style.visibility = "hidden";
                                    
                                    let img = document.createElement('img');
                                    img.id = 'corpse' + (score);
                                    //img.classList.add('corpses');
                                    img.style.position = 'absolute';
                                    img.src ='./Images/Character/D1.png';
                                    if (!right){
                                        img.style.transform = "scaleX(-1)";
                                    }
                                    img.style.left = guy.style.left;
                                    
                                    
                                    document.getElementById('text-main').appendChild(img);

                                    //document.getElementById('corpse' + score).style.top = document.getElementById('body').scrollHeight - document.getElementsByClassName('footer')[0].offsetHeight + "px";
                                }
                                else{
                                    document.getElementById('corpse' + score).style.top = (fallingCounter * fallingCounter)+ "px";
                                }  
                            }
                            //document.getElementById('nav-name').innerHTML = document.getElementById('corpse' + score).style.top + "\n" + document.getElementById('body').scrollHeight;
                        }
                    //}
                    
                }

                


                if (parseFloat(document.getElementById('character').style.opacity) < 1.0){
                    document.getElementById('character').style.opacity = parseFloat(document.getElementById('character').style.opacity) + 0.1;
                }

                if (wait){
                    document.getElementById('character').src = "./Images/Character/M0.png";
                    counter++;
                    if (counter > 32){
                        
                        wait = false;
                    }
                }
                
                else{
                    if (right){
                        left += moveSpeed;
                        if( left > width) {
                            
                            //clearInterval( timerId ); //Stop the interval because left is > 200
                            document.getElementById('character').style.transform = "scaleX(-1)";
                            left= document.getElementById("nav-name").offsetWidth - 64;
                            right = false;
                            wait = true;
                        }

                        counter++;
                        if (counter > 4){
                            counter = 0;
                            if (spriteManager > 2){
                                up = false;
                            }
                            else if (spriteManager < 2){
                                up = true;
                            }
                            up ? spriteManager++ : spriteManager--;
                            document.getElementById('character').src = "./Images/Character/M" + spriteManager + ".png";
                        }
                        //Update image
                        guy.style.left = left + "px";
                }
                else{
                    
                    if(left > width) { 

                        trigger = true;
                        //document.getElementById('nav-name').innerHTML = guy.style.left + "\n" + width + "BANG";
                        //clearInterval( timerId ); //Stop the interval because left is > 200
                        document.getElementById('character').style.transform = "scaleX(-1)";
                        left= document.getElementById("nav-name").offsetWidth - 64;
                        right = false;
                    }

                    left -= moveSpeed;
                    if( left < 8) {
                        
                        //clearInterval( timerId ); //Stop the interval because left is > 200
                        document.getElementById('character').style.transform = "scaleX(1)";
                        left = 8;
                        right = true;
                        wait = true;
                    }
                    



                    counter++;
                    if (counter > 4){
                        counter = 0;
                        if (spriteManager > 2){
                            up = false;
                        }
                        else if (spriteManager < 2){
                            up = true;
                        }
                        up ? spriteManager++ : spriteManager--;
                        document.getElementById('character').src = "./Images/Character/M" + spriteManager + ".png";
                    }
                    //Update image
                    guy.style.left = left + "px";
                    }
                    document.getElementById('deathSpawner').style.left = guy.style.left;
                }
                
                
            }, 33 );

            function GFG_Fun() {
                //<img id="character" style="position:absolute;" src="./Images/Character/M0.png" onclick="GFG_Fun()" >
                score++;

                let img = document.createElement('img');
                img.id = 'corpse' + score;
                img.style.position = 'absolute';
                img.src ='./Images/Character/D0.png';
                img.style.left = guy.style.left;
                document.getElementById('deathSpace').appendChild(img);
                
                if (wait){
                    permaWait = true;
                }

                document.getElementById('character').style.visibility = "hidden";
                death = true;
                falling = true;

                punch1 = new Audio('./sfx/punch-1.mp3');
                punch1.volume = 0.2;
                punch1.play();
            }
        </script>
        
        <h1 id="nav-name">MAC BURTON</h1>
        <div id="nav-links" class="row">
            <!-- <button onclick="updateScore()">temp button</button> -->
            
            
            <div class="col-5">
                <a href="https://github.com/limemonkeys">
                    <img class="nav-logos" src="./Images/Logos/github.png" alt="Github Logo">
                </a>
            </div>
            <div class="col-5">
                <a href="https://limemonkeys.itch.io/">
                    <img class="nav-logos" src="./Images/Logos/itch.png" alt="Itch.io Logo">
                </a>
            </div>
            <div class="col-5">
                <a href="https://www.linkedin.com/in/joseph-burton-2851a319b/">
                    <img class="nav-logos" src="./Images/Logos/linkedin.png" alt="LinkedIn Logo">     
                </a>
            </div>
            <div class="col-5">
                <a href="mailto:macburton1000@gmail.com">
                    <img class="nav-logos" src="./Images/Logos/mail.png" alt="Email Logo">     
                </a>
            </div>
            <div class="col-5">
                <a href="https://www.instagram.com/citrussimian/">
                    <img class="nav-logos" src="./Images/Logos/instagram.png" alt="Instagram Logo">    
                </a>
            </div>
        </div>
        <div class="row">
            <a class="col-3" href="./index.html">
                <div class="nav-page">
                    Home
                </div>
            </a> 
            <a class="col-3" href="./portfolio.html">
                <div class="nav-page">
                    Portfolio
                </div>
            </a>
            <a class="col-3" href="./bootlegatog.html">
                <div class="nav-page">
                    Bootlegatog
                </div>
            </a>
        </div>
        

        

        <!--Main-->
        <div class="main border">
            <h1>Home</h1>
            <p class="text-center">temp.</p>
            <h1 class="text-space">About Me</h1>
            <img id="profile" src="./Images/Headshot 1.jpeg" alt="Selfie">
            <p id="text-main" class="text">
                My name is Mac Burton. 
                <br><br>
                I am a New Grad who recieved a Bachelors of Computer Science 
                and Certificate of User Experience Design and Evaluation from 
                Dalhousie University.
                <br><br>
                I love to keep myself busy with my free time with
                personal projects relating to my studies. More specifically, I
                have a passion for game development and find myself participating 
                in game jams when I can.
                <br><br>
                I also enjoy trading card games and cooking with my free time.
                <br><br>
                I recently retired as President and Founder of the Dalhousie
                Trading Card Game Society. Has been going strong for four years.
                My Trading Card Game of choice is Magic the Gathering and I enjoy
                casual EDH and competitive modern.
                <br><br>
                I volunteered frequently with the Loaded Ladle for the past year.
                The Loaded Ladle is a non-profit open food cooperative, providing free
                meal services to the community from Tuesday to Friday. The Loaded
                Ladle serves upwards of 300 people each day. I have also run a team
                for the Iron Ladle: A cooking competition in which I assembled a team
                and planned a recipe for one of the services.
                <br><br>
                I am a part time musician with the 36 Canadian Brigade Group Band 
                with the Department of National Defense as a Army Reservist at the 
                rank of Corporal. I have attended the Canadian Forces School of Music
                at Canadian Forces Base Borden in Ontario.
                <br>
            </p>
        </div>
    </body>
    <footer class="footer">
        <p>Sour Simian Studios 2023</p>
    </footer>
</html>